<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Borrower Dashboard - M-PESEWA</title>
    <link rel="stylesheet" href="../../assets/css/main.css">
    <link rel="stylesheet" href="../../assets/css/dashboard.css">
    <link rel="stylesheet" href="../../assets/css/components.css">
    <link rel="stylesheet" href="../../assets/css/forms.css">
    <link rel="stylesheet" href="../../assets/css/tables.css">
    <link rel="stylesheet" href="../../assets/css/animations.css">
    <link rel="manifest" href="../../manifest.json">
    <link rel="icon" href="../../assets/images/icons/icon-72x72.png">
</head>
<body>
    <div class="dashboard">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-user">
                    <div class="sidebar-avatar">B</div>
                    <div class="sidebar-user-info">
                        <h4>John Borrower</h4>
                        <p>Borrower</p>
                        <span class="sidebar-role">Active</span>
                    </div>
                </div>
            </div>
            <nav class="sidebar-nav">
                <a href="borrower-dashboard.html" class="sidebar-nav-item active">
                    <span class="sidebar-nav-icon">üìä</span>
                    <span class="sidebar-nav-text">Dashboard</span>
                </a>
                <a href="../borrowing.html" class="sidebar-nav-item">
                    <span class="sidebar-nav-icon">üõí</span>
                    <span class="sidebar-nav-text">Loan Cart</span>
                    <span class="sidebar-nav-badge">1</span>
                </a>
                <a href="../groups.html" class="sidebar-nav-item">
                    <span class="sidebar-nav-icon">üë•</span>
                    <span class="sidebar-nav-text">My Groups</span>
                    <span class="sidebar-nav-badge">2</span>
                </a>
                <a href="../ledger.html" class="sidebar-nav-item">
                    <span class="sidebar-nav-icon">üìí</span>
                    <span class="sidebar-nav-text">My Ledgers</span>
                </a>
                <a href="../subscriptions.html" class="sidebar-nav-item">
                    <span class="sidebar-nav-icon">üíé</span>
                    <span class="sidebar-nav-text">Subscription</span>
                </a>
                <a href="../blacklist.html" class="sidebar-nav-item">
                    <span class="sidebar-nav-icon">‚ö´</span>
                    <span class="sidebar-nav-text">Blacklist</span>
                </a>
                <a href="../debt-collectors.html" class="sidebar-nav-item">
                    <span class="sidebar-nav-icon">üõ°Ô∏è</span>
                    <span class="sidebar-nav-text">Debt Collectors</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <div class="sidebar-stats">
                    <div class="sidebar-stat">
                        <span>Active Loans</span>
                        <span class="sidebar-stat-value">2</span>
                    </div>
                    <div class="sidebar-stat">
                        <span>Groups</span>
                        <span class="sidebar-stat-value">2/4</span>
                    </div>
                    <div class="sidebar-stat">
                        <span>Rating</span>
                        <span class="sidebar-stat-value">4.5 ‚òÖ</span>
                    </div>
                </div>
            </div>
        </aside>
        <main class="dashboard-content">
            <header class="dashboard-header">
                <div>
                    <h1 class="dashboard-title">Borrower Dashboard</h1>
                    <p class="dashboard-subtitle">Manage your emergency loans and repayments</p>
                </div>
                <div class="dashboard-actions">
                    <button class="btn btn-primary" onclick="location.href='../borrowing.html'">
                        + Request Loan
                    </button>
                    <button class="btn btn-outline" onclick="location.href='../groups.html'">
                        üë• Join Group
                    </button>
                </div>
            </header>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon stat-icon-primary">
                        üí∞
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">‚Çµ 2,500</div>
                        <div class="stat-label">Total Borrowed</div>
                        <div class="stat-trend trend-up">
                            ‚Üë 10% this month
                        </div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon stat-icon-warning">
                        ‚è≥
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">‚Çµ 800</div>
                        <div class="stat-label">Due in 7 days</div>
                        <div class="stat-trend trend-down">
                            ‚Üì 2 days left
                        </div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon stat-icon-success">
                        ‚≠ê
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">4.5 ‚òÖ</div>
                        <div class="stat-label">Borrower Rating</div>
                        <div class="stat-trend trend-up">
                            ‚Üë 0.2 this week
                        </div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon stat-icon-danger">
                        üö´
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">0</div>
                        <div class="stat-label">Blacklist Status</div>
                        <div class="stat-trend">
                            Clean record
                        </div>
                    </div>
                </div>
            </div>

            <div class="dashboard-section">
                <div class="section-header">
                    <h2 class="section-title">Active Loans</h2>
                    <div class="section-actions">
                        <button class="btn btn-sm btn-outline" onclick="loadMoreLoans()">
                            View All
                        </button>
                    </div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Category</th>
                                <th>Amount</th>
                                <th>Lender</th>
                                <th>Group</th>
                                <th>Due Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div class="flex items-center gap-2">
                                        <div class="transaction-icon transaction-icon-expense">
                                            üöå
                                        </div>
                                        <span>Transport Fare</span>
                                    </div>
                                </td>
                                <td>‚Çµ 500</td>
                                <td>Jane Lender</td>
                                <td>Family Group</td>
                                <td>Dec 28, 2024</td>
                                <td><span class="badge badge-warning">Due in 3 days</span></td>
                                <td>
                                    <div class="table-actions">
                                        <button class="btn btn-sm btn-primary" onclick="repayLoan(1)">
                                            Repay
                                        </button>
                                        <button class="btn btn-sm btn-outline" onclick="viewDetails(1)">
                                            Details
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="flex items-center gap-2">
                                        <div class="transaction-icon transaction-icon-expense">
                                            üì±
                                        </div>
                                        <span>Mobile Data</span>
                                    </div>
                                </td>
                                <td>‚Çµ 300</td>
                                <td>Mike Lender</td>
                                <td>Work Group</td>
                                <td>Jan 5, 2025</td>
                                <td><span class="badge badge-success">On track</span></td>
                                <td>
                                    <div class="table-actions">
                                        <button class="btn btn-sm btn-primary" onclick="repayLoan(2)">
                                            Repay
                                        </button>
                                        <button class="btn btn-sm btn-outline" onclick="viewDetails(2)">
                                            Details
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="dashboard-section">
                <div class="section-header">
                    <h2 class="section-title">Loan Categories Available</h2>
                    <p class="section-subtitle">Select a category to add to your cart</p>
                </div>
                <div class="loan-categories-grid">
                    <div class="loan-category-option">
                        <input type="radio" name="loan-category" id="category1" checked>
                        <label for="category1" class="loan-category-label">
                            <span class="loan-category-icon">üöå</span>
                            <span class="loan-category-name">Transport</span>
                            <span class="loan-category-desc">Move on, don't stall</span>
                        </label>
                    </div>
                    <div class="loan-category-option">
                        <input type="radio" name="loan-category" id="category2">
                        <label for="category2" class="loan-category-label">
                            <span class="loan-category-icon">üì±</span>
                            <span class="loan-category-name">Data/Airtime</span>
                            <span class="loan-category-desc">Stay connected</span>
                        </label>
                    </div>
                    <div class="loan-category-option">
                        <input type="radio" name="loan-category" id="category3">
                        <label for="category3" class="loan-category-label">
                            <span class="loan-category-icon">üî•</span>
                            <span class="loan-category-name">Cooking Gas</span>
                            <span class="loan-category-desc">Cook with confidence</span>
                        </label>
                    </div>
                    <div class="loan-category-option">
                        <input type="radio" name="loan-category" id="category4">
                        <label for="category4" class="loan-category-label">
                            <span class="loan-category-icon">üç≤</span>
                            <span class="loan-category-name">Food</span>
                            <span class="loan-category-desc">Don't sleep hungry</span>
                        </label>
                    </div>
                </div>
                <div class="form-actions">
                    <button class="btn btn-primary" onclick="addToCart()">
                        Add to Cart
                    </button>
                    <button class="btn btn-outline" onclick="viewCart()">
                        View Cart (1)
                    </button>
                </div>
            </div>

            <div class="dashboard-section">
                <div class="section-header">
                    <h2 class="section-title">Recent Repayments</h2>
                </div>
                <div class="transactions-list">
                    <div class="transaction-item">
                        <div class="transaction-info">
                            <div class="transaction-icon transaction-icon-income">
                                ‚úÖ
                            </div>
                            <div class="transaction-details">
                                <h4>Transport Loan Repayment</h4>
                                <p>Dec 15, 2024 ‚Ä¢ Family Group</p>
                            </div>
                        </div>
                        <div class="transaction-amount positive">
                            +‚Çµ 550
                        </div>
                    </div>
                    <div class="transaction-item">
                        <div class="transaction-info">
                            <div class="transaction-icon transaction-icon-income">
                                ‚úÖ
                            </div>
                            <div class="transaction-details">
                                <h4>Data Loan Repayment</h4>
                                <p>Dec 10, 2024 ‚Ä¢ Work Group</p>
                            </div>
                        </div>
                        <div class="transaction-amount positive">
                            +‚Çµ 330
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="../../assets/js/utils.js"></script>
    <script src="../../assets/js/auth.js"></script>
    <script src="../../assets/js/roles.js"></script>
    <script src="../../assets/js/borrowing.js"></script>
    <script>
        function loadMoreLoans() {
            alert('Loading all active loans...');
        }

        function repayLoan(loanId) {
            alert('Initiating repayment for loan #' + loanId);
        }

        function viewDetails(loanId) {
            alert('Showing details for loan #' + loanId);
        }

        function addToCart() {
            const selected = document.querySelector('input[name="loan-category"]:checked');
            const categoryName = selected.nextElementSibling.querySelector('.loan-category-name').textContent;
            alert('Added ' + categoryName + ' to cart');
        }

        function viewCart() {
            window.location.href = '../borrowing.html';
        }
    </script>
</body>
</html>